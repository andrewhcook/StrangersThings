{"ast":null,"code":"import _regeneratorRuntime from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import{BrowserRouter,Route,Switch,Link}from'react-router-dom';import{Posts,Register,LogIn,Logout,Home,CreatePostForm}from'./Components/index';import{fetchPosts,fetchUser}from'./api/Requests.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),reloadItem=_useState2[0],setReloadItem=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(window.localStorage.getItem(\"token\")||null),_useState6=_slicedToArray(_useState5,2),token=_useState6[0],setToken=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];useEffect(function(){var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var _yield$fetchPosts,error,posts_value;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchPosts(token);case 2:_yield$fetchPosts=_context.sent;error=_yield$fetchPosts.error;posts_value=_yield$fetchPosts.posts_value;if(error){console.error(error);}setPosts(posts_value.reverse());case 7:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(_x){return _ref.apply(this,arguments);};}();var getUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token){var _yield$fetchUser,error,userResponse;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetchUser(token);case 2:_yield$fetchUser=_context2.sent;error=_yield$fetchUser.error;userResponse=_yield$fetchUser.userResponse;//console.log(\"userResponse:\", userResponse);\nif(error){console.error(error);}setUser(userResponse);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getUser(_x2){return _ref2.apply(this,arguments);};}();getUser(token);//console.log(\"user:\", user);\ngetPosts(token);},[reloadItem]);//  x make the nav bar then make the rest of the UI.\n// x use router to show the appropriate view\n// add a Profile view upon login which displays messages\n// NAV BAR on top >> login component shows below nav bar upon first load >> posts in center below nav bar and home component>>\n// Home message \nreturn/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"nav-bar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/Home\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/Posts\",children:\"Posts\"}),token?/*#__PURE__*/_jsx(Logout,{setToken:setToken}):/*#__PURE__*/_jsx(Link,{to:\"/LogIn\",children:\"Login/Register\"})]}),/*#__PURE__*/_jsxs(\"h2\",{className:\"logo\",children:[\"Strangers' Things \",/*#__PURE__*/_jsxs(\"div\",{className:\"hand-holder\",children:[\"View posts of items for sale in \\\"Posts\\\" or \\\"Home\\\" links above \",/*#__PURE__*/_jsx(\"div\",{className:\"secondary-hand-holder\",children:\" To post your own item for sale, login and create your own listing by using \\\"Create Post Form\\\" on the right side of Home page\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"main-section\",children:[/*#__PURE__*/_jsxs(Route,{path:\"/Login\",children:[/*#__PURE__*/_jsx(LogIn,{setToken:setToken,setUser:setUser,reloadItem:reloadItem,setReloadItem:setReloadItem}),/*#__PURE__*/_jsx(\"div\",{children:\"Not a user? Register Below: \"}),/*#__PURE__*/_jsx(Register,{setToken:setToken,reloadItem:reloadItem,setReloadItem:setReloadItem})]}),/*#__PURE__*/_jsx(Route,{path:\"/Posts\",children:/*#__PURE__*/_jsx(Posts,{posts:posts,token:token,setPosts:setPosts,reloadItem:reloadItem,setReloadItem:setReloadItem})}),/*#__PURE__*/_jsxs(Route,{path:\"/Home\",children:[token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Home,{guest:user}),/*#__PURE__*/_jsx(\"aside\",{children:/*#__PURE__*/_jsx(CreatePostForm,{token:token,setPosts:setPosts,posts:posts,reloadItem:reloadItem,setReloadItem:setReloadItem})}),\" \"]}):null,/*#__PURE__*/_jsx(Posts,{posts:posts,token:token,setPosts:setPosts,reloadItem:reloadItem,setReloadItem:setReloadItem})]})]})]})});};var root=ReactDOM.createRoot(document.getElementById('app'));root.render(/*#__PURE__*/_jsx(App,{}));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","BrowserRouter","Route","Switch","Link","Posts","Register","LogIn","Logout","Home","CreatePostForm","fetchPosts","fetchUser","App","reloadItem","setReloadItem","posts","setPosts","window","localStorage","getItem","token","setToken","user","setUser","getPosts","error","posts_value","console","reverse","getUser","userResponse","root","createRoot","document","getElementById","render"],"sources":["/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/src/index.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter, Route, Switch, Link} from 'react-router-dom';\nimport {Posts, Register, LogIn, Logout, Home, CreatePostForm} from './Components/index';\nimport { fetchPosts, fetchUser } from './api/Requests.js';\n\n\n\n\nconst App = () => {\n  const [reloadItem, setReloadItem] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [token, setToken] = useState(\n    window.localStorage.getItem(\"token\") || null\n  );\n  const [user,setUser] = useState({});\n  useEffect( ()=> {\n    const getPosts = async (token) => {\n      const {error, posts_value} = await fetchPosts(token);\n    if (error) {\n      console.error(error);\n    }\n    setPosts(posts_value.reverse());};\n    const getUser = async (token) => {\n     // console.log(\"got to getUser() call\");\n      const {error, userResponse} = await fetchUser(token);\n      //console.log(\"userResponse:\", userResponse);\n      if (error) {\n        console.error(error);\n      }\n      setUser(userResponse);\n    };\n    getUser(token);\n    //console.log(\"user:\", user);\n    getPosts(token);\n  },[reloadItem])\n  //  x make the nav bar then make the rest of the UI.\n  // x use router to show the appropriate view\n  // add a Profile view upon login which displays messages\n  // NAV BAR on top >> login component shows below nav bar upon first load >> posts in center below nav bar and home component>>\n  // Home message \n  \n    return(\n      <BrowserRouter>\n      <div id = \"container\">\n        <div id = \"nav-bar\">\n          <Link to =\"/Home\">Home</Link>\n          <Link to = \"/Posts\">Posts</Link>\n         {token ? <Logout setToken={setToken}></Logout> : <Link to = \"/LogIn\">Login/Register</Link>} \n\n\n        </div>\n        <h2 className='logo'>Strangers' Things <div className=\"hand-holder\">View posts of items for sale in \"Posts\" or \"Home\" links above <div className='secondary-hand-holder'> To post your own item for sale, login and create your own listing by using \"Create Post Form\" on the right side of Home page</div></div></h2>\n      <div id = \"main-section\">\n      <Route path = \"/Login\">\n        <LogIn setToken = {setToken} setUser = {setUser} reloadItem = {reloadItem} setReloadItem = {setReloadItem}></LogIn>\n        <div>Not a user? Register Below: </div>\n        <Register setToken={setToken} reloadItem = {reloadItem} setReloadItem = {setReloadItem}></Register>\n        </Route>\n        <Route path = \"/Posts\">\n        <Posts posts = {posts} token = {token} setPosts = {setPosts} reloadItem = {reloadItem} setReloadItem = {setReloadItem}></Posts>\n        </Route>\n        <Route path = \"/Home\">\n          { token ? <>\n          <Home guest = {user}></Home>\n          <aside><CreatePostForm token = {token} setPosts = {setPosts} posts = {posts} reloadItem = {reloadItem} setReloadItem = {setReloadItem}></CreatePostForm></aside> </>: null}\n          <Posts posts = {posts} token = {token} setPosts = {setPosts} reloadItem = {reloadItem} setReloadItem = {setReloadItem}></Posts>\n        </Route>\n    </div>\n    </div>\n    </BrowserRouter>)\n};\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<App />);"],"mappings":"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"},"metadata":{},"sourceType":"module"}