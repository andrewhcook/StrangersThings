{"ast":null,"code":"import _slicedToArray from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from'react';import{DeletePost,SendMessage}from\"../api/Requests\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var post=function post(itemInfo,token,reloadItem,setReloadItem,message,setMessage){//console.log(token);\nreturn itemInfo.isAuthor?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\" Post: \",itemInfo.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\"Author: \",itemInfo.author.username,\" (You)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\"Price: \",itemInfo.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\"Location: \",itemInfo.location]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item description\",children:[\"Description: \",itemInfo.description]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item messages\",children:[\"  Messages:\",itemInfo.messages?/*#__PURE__*/_jsx(_Fragment,{children:itemInfo.messages.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"message-on-posting\",children:[\"User: \",item.fromUser.username,\" writes: \",item.content]});})}):null]}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-post\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:DeletePost(token,itemInfo._id);setReloadItem(!reloadItem);case 2:case\"end\":return _context.stop();}}},_callee);})),children:\"Delete Post\"})]}),\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\" Post: \",itemInfo.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\"Author: \",itemInfo.author.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\"Price: \",itemInfo.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item\",children:[\"Location: \",itemInfo.location]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-item description\",children:[\"Description: \",itemInfo.description]}),token?/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:SendMessage(token,itemInfo._id,message);case 1:case\"end\":return _context2.stop();}}},_callee2);})),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(event){setMessage(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\" Send Message \"}),\" \"]}):null]}),\" \"]});};var searchForm=function searchForm(searchTerm,setSearchTerm){return/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",value:searchTerm,onChange:function onChange(event){setSearchTerm(event.target.value);}});};var Posts=function Posts(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var response=props.posts;var token=props.token;var reloadItem=props.reloadItem;var setReloadItem=props.setReloadItem;//console.log(response);\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];function postMatches(post,text){// return true if any of the fields you want to check against include the text\n// strings have an .includes() method \nif(!text){return true;}if(post.title.includes(text)){return true;}if(post.description.includes(text)){return true;}if(post.price.includes(text)){return true;}if(post.author.username.includes(text)){return true;}return false;}function truthytest(searchValue,posts){if(searchValue===\"\"){return true;}if(searchValue!==\"\"&&!posts){return false;}return true;}var filteredPosts=response.filter(function(post){return postMatches(post,searchTerm);});return truthytest(searchTerm,filteredPosts)?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \",searchForm(searchTerm,setSearchTerm),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[\" \",filteredPosts.map(function(item){return post(item,token,reloadItem,setReloadItem,message,setMessage);})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \",searchForm(searchTerm,setSearchTerm),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"no-results-error\",children:\"No Search Results Found\"})]});};export default Posts;","map":{"version":3,"names":["React","useState","useEffect","DeletePost","SendMessage","post","itemInfo","token","reloadItem","setReloadItem","message","setMessage","isAuthor","title","author","username","price","location","description","messages","map","item","fromUser","content","_id","event","target","value","searchForm","searchTerm","setSearchTerm","Posts","props","response","posts","postMatches","text","includes","truthytest","searchValue","filteredPosts","filter"],"sources":["/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/src/Components/Posts.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { DeletePost, SendMessage } from \"../api/Requests\";\n\nconst post = (itemInfo, token, reloadItem, setReloadItem, message, setMessage) => {\n  //console.log(token);\n    return itemInfo.isAuthor ?  <><div className=\"post\">\n    <div className=\"post-item\"> Post: {itemInfo.title}</div>\n    <div className=\"post-item\">Author: {itemInfo.author.username} (You)</div>\n    <div className=\"post-item\">Price: {itemInfo.price}</div>\n    <div className=\"post-item\">Location: {itemInfo.location}</div>\n    <div className= \"post-item description\">Description: {itemInfo.description}</div>\n    <div className=\"post-item messages\">  Messages:{itemInfo.messages ? <>{itemInfo.messages.map((item)=> {return <div className=\"message-on-posting\">User: {item.fromUser.username} writes: {item.content}</div>})}</>: null}</div>\n    <button className=\"delete-post\" onClick={async() =>{DeletePost(token, itemInfo._id);\n    setReloadItem(!reloadItem)}}>Delete Post</button>\n</div> </>: <><div className=\"post\">\n        <div className=\"post-item\"> Post: {itemInfo.title}</div>\n        <div className=\"post-item\">Author: {itemInfo.author.username}</div>\n        <div className=\"post-item\">Price: {itemInfo.price}</div>\n        <div className=\"post-item\">Location: {itemInfo.location}</div>\n        <div className= \"post-item description\">Description: {itemInfo.description}</div>\n        {token ? <form onSubmit = {async () => {SendMessage(token,itemInfo._id, message);\n        }}>\n            <input type = \"text\" onChange = {(event)=> {setMessage(event.target.value)}}></input> <button type = \"submit\"> Send Message </button> </form>: null}\n    </div> </>\n    }\n\n\n\n\nconst searchForm = (searchTerm, setSearchTerm) => {\n    \n\n  return <input  type=\"text\" placeholder='Search'  value = {searchTerm}  onChange = {(event)=> {\n    setSearchTerm(event.target.value);}}></input>\n}\n\nconst Posts =  (props) => {\n\n\n    const [message, setMessage] = useState(\"\");\n    const response = props.posts;\n    const token = props.token;\n    const reloadItem = props.reloadItem;\n    const setReloadItem = props.setReloadItem;\n    //console.log(response);\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n\n    function postMatches(post, text) {\n        // return true if any of the fields you want to check against include the text\n        // strings have an .includes() method \n        if (!text) {\n          return true \n        }\n        if (post.title.includes(text)) {\n          return true\n        }\n        if (post.description.includes(text)) {\n            return true\n          }\n        if (post.price.includes(text)) {\n        return true\n          }\n        if (post.author.username.includes(text)) {\n        return true\n        }\n        return false\n      }\n      function truthytest(searchValue, posts){\n        if (searchValue === \"\") {return true}\n        if (searchValue !== \"\" && !posts) {\n          return false\n        }\n        return true\n      }\n      const filteredPosts = response.filter(post => postMatches(post, searchTerm));\n    return  truthytest(searchTerm, filteredPosts) ? <><div> {searchForm(searchTerm,setSearchTerm)} </div><div className='posts'> {filteredPosts.map((item) => { return post(item, token, reloadItem, setReloadItem, message, setMessage); })}</div></>: <><div> {searchForm(searchTerm, setSearchTerm)} </div><div className = \"no-results-error\">No Search Results Found</div></>\n\n\n}\n\nexport default Posts\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}