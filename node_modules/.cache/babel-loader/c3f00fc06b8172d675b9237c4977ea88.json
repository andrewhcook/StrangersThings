{"ast":null,"code":"import _regeneratorRuntime from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{logInUser,fetchUser}from\"../api/Requests\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogIn=function LogIn(props){var setToken=props.setToken,setUser=props.setUser,reloadItem=props.reloadItem,setReloadItem=props.setReloadItem;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var onSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var _yield$logInUser,error,token,message,getUser;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log(\"onSubmitHandler() in Login called\");\nevent.preventDefault();_context2.next=3;return logInUser(username,password);case 3:_yield$logInUser=_context2.sent;error=_yield$logInUser.error;token=_yield$logInUser.token;message=_yield$logInUser.message;setToken(token);window.localStorage.setItem('token',token);getUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$fetchUser,error,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchUser(token);case 2:_yield$fetchUser=_context.sent;error=_yield$fetchUser.error;user=_yield$fetchUser.user;if(error){console.error(error);}setUser(user);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref2.apply(this,arguments);};}();getUser();setReloadItem(!reloadItem);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmitHandler(_x){return _ref.apply(this,arguments);};}();//fix this form\nreturn/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login Form\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,placeholder:\"username\",required:true,onChange:function onChange(event){setUsername(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,placeholder:\"password\",minLength:\"8\",required:true,onChange:function onChange(event){setPassword(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-form\",type:\"submit\",children:\"Submit\"})]});};export default LogIn;","map":{"version":3,"names":["React","useState","logInUser","fetchUser","LogIn","props","setToken","setUser","reloadItem","setReloadItem","username","setUsername","password","setPassword","onSubmitHandler","event","preventDefault","error","token","message","window","localStorage","setItem","getUser","user","console","target","value"],"sources":["/home/ahc/Bootcamp2022UBUNTU/course_work/NewStrangersThings/StrangersThings/src/Components/LogIn.js"],"sourcesContent":["import React, {useState} from 'react'\n\nimport { logInUser, fetchUser} from \"../api/Requests\";\n\nconst LogIn = (props) => {\n    const {setToken, setUser, reloadItem, setReloadItem} = props\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const onSubmitHandler = async (event) => {\n       // console.log(\"onSubmitHandler() in Login called\");\n        event.preventDefault();\n        const {error, token, message} = await logInUser(username, password);\n        setToken(token);\n        window.localStorage.setItem('token', token);\n        const getUser = async () => {\n          //  console.log(\"getUser() called\");\n            const {error, user} = await fetchUser(token);\n            if (error) {\n              console.error(error);\n            }\n            setUser(user); \n          };\n          getUser();\n          setReloadItem(!reloadItem);\n    }\n\n//fix this form\n    return (<form className=\"login-form\" onSubmit={onSubmitHandler}>\n        <h1>Login Form</h1>\n        <div className=\"field\">\n            <label>Username</label>\n            <input\n            type = \"text\"\n            value = {username}\n            placeholder = \"username\"\n            required\n            onChange = {(event) => {setUsername(event.target.value)}}\n            />\n            \n        </div>\n        <div className=\"field\">\n            <label>Password</label>\n            <input\n            type = \"password\"\n            value = {password}\n            placeholder = \"password\"\n            minLength = \"8\"\n            required\n            onChange={(event) => {setPassword(event.target.value)}}\n            />\n        </div>\n        <button className=\"submit-form\" type = \"submit\">Submit</button>\n    </form>);\n}\n\nexport default LogIn"],"mappings":"mfAAA,MAAOA,MAAK,EAAGC,QAAQ,KAAO,OAAO,CAErC,OAASC,SAAS,CAAEC,SAAS,KAAO,iBAAiB,CAAC,wFAEtD,GAAMC,MAAK,CAAG,QAARA,MAAK,CAAIC,KAAK,CAAK,CACrB,GAAOC,SAAQ,CAAwCD,KAAK,CAArDC,QAAQ,CAAEC,OAAO,CAA+BF,KAAK,CAA3CE,OAAO,CAAEC,UAAU,CAAmBH,KAAK,CAAlCG,UAAU,CAAEC,aAAa,CAAIJ,KAAK,CAAtBI,aAAa,CACnD,cAAgCR,QAAQ,CAAC,EAAE,CAAC,wCAArCS,QAAQ,eAAEC,WAAW,eAC5B,eAAgCV,QAAQ,CAAC,EAAE,CAAC,yCAArCW,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,gBAAe,4FAAG,kBAAOC,KAAK,yKACjC;AACCA,KAAK,CAACC,cAAc,EAAE,CAAC,uBACed,UAAS,CAACQ,QAAQ,CAAEE,QAAQ,CAAC,wCAA5DK,KAAK,kBAALA,KAAK,CAAEC,KAAK,kBAALA,KAAK,CAAEC,OAAO,kBAAPA,OAAO,CAC5Bb,QAAQ,CAACY,KAAK,CAAC,CACfE,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEJ,KAAK,CAAC,CACrCK,OAAO,6FAAG,2LAEgBpB,UAAS,CAACe,KAAK,CAAC,uCAArCD,KAAK,kBAALA,KAAK,CAAEO,IAAI,kBAAJA,IAAI,CAClB,GAAIP,KAAK,CAAE,CACTQ,OAAO,CAACR,KAAK,CAACA,KAAK,CAAC,CACtB,CACAV,OAAO,CAACiB,IAAI,CAAC,CAAC,sDACf,kBAPGD,QAAO,4CAQXA,OAAO,EAAE,CACTd,aAAa,CAAC,CAACD,UAAU,CAAC,CAAC,yDAChC,kBAhBKM,gBAAe,4CAgBpB,CAEL;AACI,mBAAQ,cAAM,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAEA,eAAgB,wBAC3D,kCAAmB,cACnB,aAAK,SAAS,CAAC,OAAO,wBAClB,mCAAuB,cACvB,cACA,IAAI,CAAG,MAAM,CACb,KAAK,CAAIJ,QAAS,CAClB,WAAW,CAAG,UAAU,CACxB,QAAQ,MACR,QAAQ,CAAI,kBAACK,KAAK,CAAK,CAACJ,WAAW,CAACI,KAAK,CAACW,MAAM,CAACC,KAAK,CAAC,EAAE,EACvD,GAEA,cACN,aAAK,SAAS,CAAC,OAAO,wBAClB,mCAAuB,cACvB,cACA,IAAI,CAAG,UAAU,CACjB,KAAK,CAAIf,QAAS,CAClB,WAAW,CAAG,UAAU,CACxB,SAAS,CAAG,GAAG,CACf,QAAQ,MACR,QAAQ,CAAE,kBAACG,KAAK,CAAK,CAACF,WAAW,CAACE,KAAK,CAACW,MAAM,CAACC,KAAK,CAAC,EAAE,EACrD,GACA,cACN,eAAQ,SAAS,CAAC,aAAa,CAAC,IAAI,CAAG,QAAQ,oBAAgB,GAC5D,CACX,CAAC,CAED,cAAevB,MAAK"},"metadata":{},"sourceType":"module"}